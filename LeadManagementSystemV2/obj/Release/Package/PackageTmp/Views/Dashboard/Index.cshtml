@model IEnumerable<LeadManagementSystemV2.Models.DepartmentModel>
@using LeadManagementSystemV2.Models;
@using LeadManagementSystemV2.Helpers;
<div id="page-head">
    <div class="pad-all text-center">
        <h3>Welcome back to the Dashboard.</h3>
    </div>
</div>


<!--Page content-->
<!--===================================================-->
<div id="page-content">
    <div class="row">
        @if (Model != null && Model.Count() > 0)
        {
        <div class="col-lg-8">
            <div class="row demo-nifty-panel">
                <div class="col-sm-12">                    
                    <div class="panel panel-bordered panel-dark">
                        @foreach (var item in Model)
                        {
                            var list = (List<Request>)ViewBag.Request;
                            <div class="panel-heading">
                                <h3 class="panel-title">@item.DepartmentName</h3>
                            </div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-md-3">
                                        <!--Tile-->
                                        <!--===================================================-->
                                        <div class="panel panel-primary panel-colorful">
                                            <div class="pad-all media">
                                                <div class="media-left">
                                                    <i class="demo-pli-data-cloud icon-3x icon-fw"></i>
                                                </div>
                                                <div class="media-body">
                                                    <p class="text-2x mar-no media-heading">@list.Where(x => x.DepartmentID == item.ID).ToList().Count</p>
                                                    <span>Total</span>
                                                </div>
                                            </div>
                                            <div class="progress progress-xs progress-success mar-no">
                                                <div role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-light" style="width: 70%"></div>
                                            </div>
                                            <div class="pad-all text-sm">
                                                <span class="text-semibold">Today: </span> @ViewBag.TodayTotalLeads
                                            </div>

                                        </div>
                                        <!--===================================================-->
                                    </div>
                                    <div class="col-md-3">
                                        <!--Tile-->
                                        <!--===================================================-->
                                        <div class="panel panel-warning panel-colorful">
                                            <div class="pad-all media">
                                                <div class="media-left">
                                                    <i class="demo-pli-exclamation icon-3x icon-fw"></i>
                                                </div>
                                                <div class="media-body">
                                                    <p class="text-2x mar-no media-heading">@list.Where(x => x.DepartmentID == item.ID && x.Status == ApplicationHelper.EnumStatus.Pending).ToList().Count</p>
                                                    <span>Pending</span>
                                                </div>
                                            </div>
                                            <div class="progress progress-xs progress-success mar-no">
                                                <div role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-light" style="width: 70%"></div>
                                            </div>
                                            <div class="pad-all text-sm">
                                                <span class="text-semibold">Today: </span> @ViewBag.TodayTotalLeads
                                            </div>

                                        </div>
                                        <!--===================================================-->
                                    </div>
                                    <div class="col-md-3">
                                        <!--Tile-->
                                        <!--===================================================-->
                                        <div class="panel panel-success panel-colorful">
                                            <div class="pad-all media">
                                                <div class="media-left">
                                                    <i class="demo-pli-yes icon-3x icon-fw"></i>
                                                </div>
                                                <div class="media-body">
                                                    <p class="text-2x mar-no media-heading">@list.Where(x => x.DepartmentID == item.ID && x.Status == ApplicationHelper.EnumStatus.Approved).ToList().Count</p>
                                                    <span>Active</span>
                                                </div>
                                            </div>
                                            <div class="progress progress-xs progress-success mar-no">
                                                <div role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-light" style="width: 30%"></div>
                                            </div>
                                            <div class="pad-all text-sm">
                                                <span class="text-semibold">Today: </span> @ViewBag.TodayActiveLeads
                                            </div>
                                        </div>
                                        <!--===================================================-->
                                    </div>
                                    <div class="col-md-3">
                                        <!--Tile-->
                                        <!--===================================================-->
                                        <div class="panel panel-dark panel-colorful">
                                            <div class="pad-all media">
                                                <div class="media-left">
                                                    <i class="demo-pli-close icon-3x icon-fw"></i>
                                                </div>
                                                <div class="media-body">
                                                    <p class="text-2x mar-no media-heading">@list.Where(x => x.DepartmentID == item.ID && x.Status == ApplicationHelper.EnumStatus.Closed).ToList().Count</p>
                                                    <span>Closed</span>
                                                </div>
                                            </div>
                                            <div class="progress progress-xs progress-success mar-no">
                                                <div role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-light" style="width: 30%"></div>
                                            </div>
                                            <div class="pad-all text-sm">
                                                <span class="text-semibold">Today: </span> @ViewBag.TodayClosedLeads
                                            </div>
                                        </div>
                                        <!--===================================================-->
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>

            </div>
        </div>
        }
        @if (ViewBag.UserLeads != null)
        {
            <div class="col-lg-4">

                <div class="panel">
                    <div class="panel-heading">
                        <h3 class="panel-title">User's Manage Requests</h3>
                    </div>
                    <div class="panel-body">

                        <!--List Group with Badges-->
                        <!--===================================================-->

                        <ul class="list-group">
                            @foreach (var item in ViewBag.UserLeads)
                            {
                                <li class="list-group-item"><span class="badge badge-primary">@item.Value</span>@item.Text</li>
                            }
                        </ul>

                        <!--===================================================-->

                    </div>
                </div>

            </div>
        }
        else
        {
            <div class="col-lg-4">
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title">Inbox</h3>
                </div>
                <div class="panel-body">

                    <!--List Group with Badges-->
                    <!--===================================================-->

                    <ul class="list-group">
                        <li class="list-group-item"><span class="badge badge-primary">@ViewBag.TotalInbox</span>Total</li>
                        <li class="list-group-item"><span class="badge badge-primary">@ViewBag.TodayInbox</span>Today</li>
                    </ul>

                    <!--===================================================-->

                </div>
            </div>
                </div>
        }
        @*@if (ViewBag.VisitingLeads.Count > 0)
        {
            <div class="col-lg-4">
                <div class="panel">
                    <div class="panel-heading">
                        <h3 class="panel-title">Visit Confirmed Showroom</h3>
                    </div>
                    <div class="panel-body">
                        <ul class="list-group">
                            @foreach (var item in ViewBag.VisitingLeads)
                            {
                                <li class="list-group-item"><a class="badge badge-primary" href="/leads/views/@item.ID">View</a>@item.Name<br /><small><strong>Phone : </strong>@item.PhoneNumber</small><br /><small><strong>Comments : </strong>@item.Description</small></li>
                            }
                        </ul>

                    </div>
                </div>
            </div>
        }*@
    </div>

    
    @*<div class="row">
        <div class="col-lg-12">

            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="/Leads" class="btn btn-primary" style="color:white;">View Details</a></h3>
                </div>
                <div class="panel-body">
                    <table id="demo-dt-basic" class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th class="min-tablet">Customer</th>
                                <th class="min-tablet">Phone #</th>
                                <th class="min-desktop">Created DateTime</th>
                                <th class="min-desktop">Created By</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewBag.LeadRecords)
                            {
                                <tr>
                                    <td>@item.Name</td>
                                    <td>@item.Email</td>
                                    <td>@item.CustomerName</td>
                                    <td>@item.PhoneNumber</td>
                                    <td>@item.CreatedDateTime</td>
                                    <td>@item.User.Name</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>*@

</div>
<!--===================================================-->
<!--End page content-->